\chapter{1階述語論理の意味論}
\label[chapter]{chap:semantics}

本章では，1階述語論理の意味論について述べる．
\Cref{chap:formulize}から繰り返し「数理論理学で扱うのは形式的記号列である」と
繰り返し述べてきたが，
それと同時にそれらの記号列は通常の数学において何らかの「意味」を見出すことも期待していたのであった．
\Cref{chap:syntax}で定義した項や論理式に対して数学的な「意味」を付与するというのが本章での主題である．
このことは，形式的記号列の世界と通常の数学の世界との橋渡しを行っていると考えることもできる．
理論のモデルや同型の概念に覚えがある読者は多いだろう．
普段使っている概念を一歩引いた形で見直すことにより得られるものも多いはずである．

\newpage

\section{理論とそのモデル} \label[section]{sec:model}

我々は，項や論理式を純粋な形式的記号列として導入し，
数学理論の形式化を試みた．
例として群論や順序の理論を取り扱ったが，通常の数学においては
これらは集合や写像の言葉で書かれることがほとんどである．
両者の間の関係を考えよう．

\begin{Def} \label[Def]{Def:structure}
	\(\symcal{L}\)を言語とする．このとき，空でない集合\(M\)と写像
	\(F \colon L \to M \cup \bigcup_{n > 0} \paren{\powerset{M^n} \cup M^{M^n}}\)の%
	\footnote{%
		集合\(X\)が与えられたとき，\(X\)の部分集合全体からなる集合を\(X\)の
		\index[sidx]{\(\powerset{X}\)：べき集合}%
		\index[widx]{べきしゅうごう@べき集合}%
		\term{べき集合}%
		といい，\(\powerset{X}\)と表す．
	}%
	対\(\symcal{M} = \pair{M, F}\)が\(\symcal{L}\)%
	\index[widx]{こうぞう@\(\symcal{L}\)構造}%
	\term{構造}%
	であるとは，\(F\)が以下の条件をすべて満たすことをいう：
	\begin{enumerate}
		\item \(c \in L\)が定数記号ならば\(\apply{F}{c} \in M\)，すなわち\(\apply{F}{c}\)は\(M\)の元である．
		\item \(f \in L\)がアリティ\(n\)の関数記号ならば\(\apply{F}{f} \in M^{M^n}\)，すなわち\(\apply{F}{f}\)は\(M^n\)から\(M\)への写像である．
		\item \(r \in L\)がアリティ\(n\)の関係記号ならば\(\apply{F}{r} \in \powerset{M^n}\)，すなわち\(\apply{F}{r}\)は\(M\)上の\(n\)項関係である．
	\end{enumerate}
	また\(\xi \in L\)の\(F\)による像\(\apply{F}{\xi}\)を
	\index[sidx]{\(\interpretation{\symcal{M}}{\xi}\)：解釈}
	\begin{equation}
		\interpretation{\symcal{M}}{\xi}
		\label{eq:interpretation}
	\end{equation}
	と表記し，\(\xi\)の\(\symcal{L}\)構造\(\symcal{M}\)による%
	\index[widx]{かいしゃく@解釈}%
	\term{解釈}%
	と呼ぶことが多い．

	\(\symcal{M} = \pair{M, F}\)が\(\symcal{L}\)構造のとき，\(M\)を\(\symcal{M}\)の%
	\index[widx]{たいしょうりょういき@対象領域}%
	\term{対象領域}%
	と呼ぶ．
\end{Def}

\Cref{Def:structure}は，形式的記号列として与えられる言語\(L\)の元が
通常の数学においてはどういうものに相当するかを定義するものである．
項や論理式についても同様の定義をしたいのだが，まずその準備として言語の拡張を定義しておく．

\begin{Def} \label{Def:namelanguage}
	\(\symcal{L}\)を言語とし，\(\symcal{M} = \pair{M, F}\)を\(\symcal{L}\)構造とする．
	このとき，集合\(M\)の元\(a\)ごとに新たな定数記号\(c_a\)を用意し，
	これを\(\symcal{L}\)に付け加えた言語\(\symcal{L} \cup \Set{c_a | a \in M}\)を考えることができる．
	この言語を%
	\index[sidx]{\(\languagewithname{\symcal{L}}{\symcal{M}}\)：構造による言語の拡張}%
	\begin{equation}
		\languagewithname{\symcal{L}}{\symcal{M}}
		\label{eq:languagewithname}
	\end{equation}
	と表すことにする．各\(a \in M\)に対する\(c_a\)を\(a\)の%
	\index[sidx]{\(c_a\)：\(a\)の名前}%
	\index[widx]{なまえ@名前}%
	\term{名前}という．
\end{Def}

\begin{Note}
	\(\symcal{L}\)を言語とする．
	\(\symcal{L}\)構造\(\symcal{M}\)は，の元のうち
	\(a \in M\)の名前\(c_a\)の\(\symcal{M}\)による解釈を
	\begin{equation}
		\interpretation{\symcal{M}}{c_a} = a
		\label{eq:languagewithnameinterpretation}
	\end{equation}
	と定めることにより，自然に\(\languagewithname{\symcal{L}}{\symcal{M}}\)構造とみなせる．
\end{Note}

まずは項に対する解釈を定義しよう．

\begin{Def} \label{Def:interpretationforterm}
	\(\symcal{L}\)を言語とし，\(\symcal{M}\)を\(\symcal{L}\)構造とする．
	\(t\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉項として，\(t\)の\(\symcal{M}\)による解釈\(\interpretation{\symcal{M}}{t}\)
	を以下のように帰納的に定義する：
	\begin{enumerate}
		\item \(t\)が定数記号\(c\)であるならば\(\interpretation{\symcal{M}}{t} = \interpretation{\symcal{M}}{c}\)と定める．
		\item \(t\)がアリティ\(n\)の関数記号\(f\)と\(\symcal{L}\)閉項\(t_1, t_2, \dots, t_n\)を用いて\(\apply{f}{t_1, t_2, \dots, t_n}\)と表されるならば
		      \begin{equation}
			      \interpretation{\symcal{M}}{t}
			      = \apply{\interpretation{\symcal{M}}{f}}{
				      \interpretation{\symcal{M}}{t_1},
				      \interpretation{\symcal{M}}{t_2},
				      \dots,
				      \interpretation{\symcal{M}}{t_n}
			      }
			      \label{eq:terminterpretation}
		      \end{equation}
		      と定める．
	\end{enumerate}
\end{Def}

論理式においても\cref{Def:structure}や\cref{Def:interpretationforterm}
と同じような定義をしたい．しかし，与えられた集合の元や写像，関係として定式化できる
言語や項とは違い，論理式に対応する通常の数学における概念は「数学的な主張」である．
これはすでにあいまいさなく定式化されているとはいいがたいので，代わりに充足関係と呼ばれる関係を定義する．

\begin{Def} \label{Def:semanticimplies}
	\(\symcal{L}\)を言語とし，\(\symcal{M} = \pair{M, F}\)を\(\symcal{L}\)構造とする．
	このとき，\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式\(\varphi\)に対する
	\index[sidx]{\(\symcal{M} \satisfy \varphi\)：充足関係}
	\begin{equation}
		\symcal{M} \satisfy \varphi
		\label{eq:structuresatisfy}
	\end{equation}
	を，以下のように帰納的に定義する：
	\begin{enumerate}
		\item \(t_1, t_2\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉項とするとき，
		      \[
			      \symcal{M} \satisfy t_1 \objeq t_2                                       \metaequivalent \interpretation{\symcal{M}}{t_1} = \interpretation{\symcal{M}}{t_2}
		      \]
		      とする．
		\item \(r \in \symcal{L}\)をアリティ\(n\)の関係記号，
		      \(t_1, t_2, \dots, t_n\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉項とするとき，
		      \(\symcal{M} \satisfy \apply{r}{t_1, t_2, \dots, t_n}
		      \metaequivalent \pair{
			      \interpretation{\symcal{M}}{t_1},
			      \interpretation{\symcal{M}}{t_2},
			      \dots,
			      \interpretation{\symcal{M}}{t_n}
		      } \in \interpretation{\symcal{M}}{r}
		      \)
		      とする．
		\item \(\varphi, \psi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式とするとき，
		      \[
			      \symcal{M} \satisfy \lnot \varphi      \metaequivalent \text{\(\symcal{M} \satisfy \varphi\)でない}
		      \]
		      とする．
		\item \(\varphi, \psi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式とするとき，
		      \[
			      \symcal{M} \satisfy \varphi \lor \psi  \metaequivalent \text{\(\symcal{M} \satisfy \varphi\)または\(\symcal{M} \satisfy \psi\)}
		      \]
		      とする．
		\item \(\varphi, \psi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式とするとき，
		      \[
			      \symcal{M} \satisfy \varphi \land \psi \metaequivalent \text{\(\symcal{M} \satisfy \varphi\)かつ\(\symcal{M} \satisfy \psi\)}
		      \]
		      とする．
		\item \(\varphi, \psi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式とするとき，
		      \[
			      \symcal{M} \satisfy \varphi \to \psi \metaequivalent \text{\(\symcal{M} \satisfy \lnot \varphi\)または\(\symcal{M} \satisfy \psi\)}
		      \]
		      とする%
		      \footnote{%
			      ここでは\(\symcal{M} \satisfy \varphi\)ならば\(\symcal{M} \satisfy \psi\)と書きたくなるところだが，あえてそうしていない．
			      これは\(\symcal{M} \satisfy \varphi\)でないばあいに\(\symcal{M} \satisfy \varphi \to \psi\)といえるかどうかに
			      若干のあいまいさが残ってしまうことを避けるためである．
			      通常の数学では，ある主張\(A\)が成り立たない場合は「\(A\)ならば\(B\)」は成り立つものとして考えるためそれでも問題ないと思われるが，
			      ここではあいまいさを極力排することを意図してこのような記述とした．
			      言い換えれば『\(A\)が成り立たない場合は「\(A\)ならば\(B\)」は成り立つと決めた』ということとなる．
		      }%
		      ．
		\item \(\varphi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)論理式，\(x\)を変数記号とするとき，
		      \(\exists x \varphi\)が\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式（つまり\(\varphi\)に自由出現する変数記号が\(x\)以外にない）であれば
		      \[
			      \symcal{M} \satisfy \exists x \varphi  \metaequivalent \text{\(\symcal{M} \satisfy \subst{\varphi}{c_a/x}\)となる\(a \in M\)が存在する}
		      \]
		      とする．ただし，\(c_a\)は\(a \in M\)の名前である．
		\item \(\varphi\)を\(\languagewithname{\symcal{L}}{\symcal{M}}\)論理式，\(x\)を変数記号とするとき，
		      \(\forall x \varphi\)が\(\languagewithname{\symcal{L}}{\symcal{M}}\)閉論理式（つまり\(\varphi\)に自由出現する変数記号が\(x\)以外にない）であれば
		      \[
			      \symcal{M} \satisfy \forall x \varphi  \metaequivalent \text{任意の\(a \in M\)に対して\(\symcal{M} \satisfy \subst{\varphi}{c_a/x}\)となる}
		      \]
		      とする．ただし，\(c_a\)は\(a \in M\)の名前である．
	\end{enumerate}

	\(\symcal{L}\)構造\(\symcal{M}\)と\(\symcal{L}\)論理式\(\varphi\)について，
	\(\symcal{M} \satisfy \varphi\)であるとき，
	\(\symcal{M}\)は\(\varphi\)を%
	\index[widx]{じゅうそく@充足}%
	\term{充足}するという．
	論理式\(\varphi\)が与えられたとき，\(\symcal{M} \satisfy \varphi\)となる\(\symcal{L}\)構造\(\symcal{M}\)が存在するならば，
	\(\varphi\)は%
	\index[widx]{じゅうそく@充足!じゅうそくかのう@---可能}%
	\term{充足可能}であるという．

\end{Def}

\begin{Note}
	\(a \in M\)の名前\(c_a\)は\(\apply{\Var}{c_a} = \emptyset\)を満たすので，
	任意の論理式中の任意の変数記号に代入可能である．
\end{Note}

\begin{Ex} \label[Ex]{Ex:satisfy}
	\(\symcal{L}\)を\cref{Ex:grouptheory}で述べた群論の言語とする．
	整数全体の集合\(\Zahlen\)に対し，\(\Zahlen\)を対象領域とする\(\symcal{L}\)構造\(\symcal{M}\)を以下によって定義する：
	\begin{enumerate}
		\item \(\interpretation{\symcal{M}}{\obj{e}} = 0,\)
		\item \(\interpretation{\symcal{M}}{\obj{\ast}} = \mathord{+},\)
		\item \(\interpretation{\symcal{M}}{\obj{{}^{-1}}} = \mathord{-}.\)
	\end{enumerate}
	ここで，3つ目の式における右辺の「\(\mathord{-}\)」は\(x \mapsto -x\)で定義される写像である．

	この\(\symcal{L}\)構造\(\symcal{M}\)は\cref{Ex:grouptheory}で挙げた3つの\(\symcal{L}\)文をすべて充足する．
	一方で，\(\symcal{M}\)による解釈のうち\(\symcal{M}\)による\(\obj{e}\)の解釈を\(\interpretation{\symcal{M}}{\obj{e}} = 1\)
	と置き換えて得られる\(\symcal{L}\)構造\(\symcal{M}'\)は，
	\cref{Ex:grouptheory}で挙げた3つの\(\symcal{L}\)文のうち1つ目のみを充足する．
\end{Ex}

\begin{Que} \label{Que:satisfy}
	\Cref{Ex:satisfy}で述べた事実が正しいことを確かめよ．
\end{Que}

\begin{Def} \label{Def:model}
	\(\symcal{L}\)を言語，\(T\)を\(\symcal{L}\)理論とする．
	このとき，\(\symcal{L}\)構造\(\symcal{M}\)が\(T\)の%
	\index[widx]{もでる@モデル}%
	\term{モデル}であるとは，任意の\(\varphi \in T\)に対して
	\(\symcal{M} \satisfy \varphi\)
	が成り立つことをいう．\(\symcal{M}\)が\(T\)のモデルであることを%
	\index[sidx]{\(\symcal{M} \satisfy T\)：モデル}%
	\begin{equation}
		\symcal{M} \satisfy T
		\label{eq:model}
	\end{equation}
	と表す．
	また，\(T\)がモデルをもつとき，\(T\)は%
	\index[widx]{じゅうそく@充足!じゅうそくかのう@---可能}%
	\term{充足可能}である，もしくは\(T\)は%
	\index[widx]{むむじゅん@無矛盾}%
	\term{無矛盾}であるという．

	また，\(\varphi\)を\(\symcal{L}\)閉論理式とするとき，\(\symcal{L}\)理論\(T\)のすべてのモデルが
	\(\varphi\)を充足するならば，\(\varphi\)は\(T\)の%
	\index[widx]{ろんりてききけつ@論理的帰結}%
	\term{論理的帰結}である，または\(\varphi\)は\(T\)における%
	\index[widx]{ていり@定理}%
	\term{定理}であるといい，
	\begin{equation}
		T \satisfy \varphi
		\label{eq:logicalconsequence}
	\end{equation}
	と表す．特に，\(T = \emptyset\)のときには
	\begin{equation}
		\satisfy \varphi
		\label{eq:nulllogicalconsequence}
	\end{equation}
	と表記する．
\end{Def}

\begin{Ex} \label[Ex]{Ex:model}
	\Cref{Ex:grouptheory}で述べた3つの\(\symcal{L}\)文からなる\(\symcal{L}\)理論を\(T\)とする．
	このとき，\cref{Ex:satisfy}で述べた\(\symcal{L}\)構造\(\symcal{M}\)は\(T\)のモデルである．
	一方で，\cref{Ex:satisfy}で述べた\(\symcal{L}\)構造\(\symcal{M}'\)は\(T\)のモデルではない．
\end{Ex}

\begin{Note}
	通常の通学では，\cref{Ex:model}における「\(\symcal{M}\)が\(T\)のモデルである」
	ことを「\(\symcal{M}\)が群である」と表現している．
	通常の数学では理論そのものと構造がその理論のモデルであるという主張を区別する必要性は薄いのだが，
	数理論理学の文脈では当然厳格に区別する必要がある．
\end{Note}

\begin{Que} \label{Que:model}
	\Cref{Ex:grouptheory}で挙げた群の理論\(T\)について，次の論理式を\(\varphi\)とする：
	\[
		\forall \obj{x} \forall \obj{y} \paren{\obj{x} \obj{\ast} \obj{y} = \obj{y} \obj{\ast} \obj{x}}.
	\]
	このとき，\(\varphi\)を充足する\(T\)のモデルと\(\varphi\)を充足しない\(T\)のモデルを1つずつ挙げよ．
\end{Que}


\section{構造の同型} \label{sec:isomorphic}

\Cref{sec:model}では，構造やモデルについて基本的な定義を行った．
\Cref{sec:model}は理論と構造との間の関係に着目した議論であったが，ここでは構造同士の関係について考えよう．

\begin{Def} \label{Def:isomorphic}
	\(\symcal{L}\)を言語とし，\(\symcal{M}, \symcal{N}\)を対象領域が
	それぞれ\(M, N\)であるような\(\symcal{L}\)構造とする．
	このとき，写像\(\sigma \colon M \to N\)が\(\symcal{M}\)から\(\symcal{N}\)への%
	\index[widx]{どうけい@同型!じゅうどうけい@準---写像}%
	\term{準同型写像}であるとは，
	\(\sigma\)が以下の条件を満たすことをいう：
	\begin{enumerate}
		\item すべての定数記号\(c \in L\)に対して
		      \begin{equation}
			      \apply{\sigma}{\interpretation{\symcal{M}}{c}} = \interpretation{\symcal{N}}{c}
			      \label{eq:constanthomorphism}
		      \end{equation}
		      となる．
		\item アリティ\(n\)の任意の関数記号\(f\)と任意の\(a_1, a_2, \dots, a_n \in M\)に対して
		      \begin{equation}
			      \apply{\interpretation{\symcal{M}}{f}}{a_1, a_2, \dots, a_n}
			      = \apply{\interpretation{\symcal{N}}{f}}{
				      \apply{\sigma}{a_1}, \apply{\sigma}{a_2}, \dots, \apply{\sigma}{a_n}
			      }
			      \label{eq:functionhomorphism}
		      \end{equation}
		      が成り立つ．
		\item アリティ\(n\)の任意の関係記号\(r\)と任意の\(a_1, a_2, \dots, a_n\)に対して
		      \begin{equation}
			      \pair{a_1, a_2, \dots, a_n} \in \interpretation{\symcal{M}}{r}
			      \metaimplies \pair{\apply{\sigma}{a_1}, \apply{\sigma}{a_2}, \dots, \apply{\sigma}{a_n}} \in \interpretation{\symcal{N}}{r}
			      \label{eq:relationhomorphism}
		      \end{equation}
		      が成り立つ．
	\end{enumerate}

	また，準同型写像\(\sigma \colon M \to N\)が\(\symcal{M}\)から\(\symcal{N}\)への%
	\index[widx]{うめこみ@埋め込み}%
	\term{埋め込み}であるとは，\(\sigma\)が写像として単射であって，さらに
	\begin{equation}
		\pair{a_1, a_2, \dots, a_n} \in \interpretation{\symcal{M}}{r}
		\metaequivalent \pair{\apply{\sigma}{a_1}, \apply{\sigma}{a_2}, \dots, \apply{\sigma}{a_n}} \in \interpretation{\symcal{N}}{r}
		\label{eq:relationembedding}
	\end{equation}
	が成り立つことをいう．

	埋め込み\(\sigma \colon M \to N\)が写像として全単射である場合，\(\sigma\)を\(\symcal{M}\)から\(\symcal{N}\)への
	\index[widx]{どうけい@同型!どうけいしゃぞう@---写像}%
	\term{同型写像}と呼ぶ．
	2つの構造\(\symcal{M}, \symcal{N}\)について，\(\symcal{M}\)から\(\symcal{N}\)への同型写像が存在する場合，
	\(\symcal{M}\)と\(\symcal{N}\)は%
	\index[widx]{どうけい@同型}%
	\term{同型}であるといい，%
	\index[sidx]{\(\symcal{M} \isomorphic \symcal{N}\)：同型}%
	\begin{equation}
		\symcal{M} \isomorphic \symcal{N}
		\label{eq:isomorphic}
	\end{equation}
	と表す．
\end{Def}