\chapter{1階述語論理の統語論}
\label[chapter]{chap:syntax}

本章では，1階述語論理と呼ばれる体系の統語論について述べる．
統語論とは，雑に述べると「文の構造」についての理論である．
この「文」は，ここでは「数学における何らかの主張」に対応する．
つまり，ここで議論したいのは
「数学における何らかの主張はどのような要素がどう組み合わさってできているのか」
ということである．
このことを議論するための足掛かりとして，我々は\cref{chap:formulize}で述べた方針に従い
「何ら素朴的直観が関与しない形式的な記号列の世界」において
論理式という概念を構成していく．

形式的記号列の世界での定義により，何を議論の対象とし，何を議論の対象としないのかが明瞭となる．
これにより，通常の数学と同じく一般的な法則や定理を研究することが可能となる．
本章の内容はその前準備に相当する．

\newpage

\section{言語} \label[seciton]{sec:language}

議論を始めるにあたり，どのような記号を使用するのかを明瞭にする必要がある．
まず，通常の数学においてはどうなっているかを振り返ろう．

\begin{Ex} \label[Ex]{Ex:informalsymbol}
	群論においては，単位元を表す記号「\(\obj{e}\)」，2項演算を表す記号
	「\(\obj{\mathord{\ast}}\)」，逆元を表す記号「\({}^{\obj{-1}}\)」が用いられる．
	また，順序の理論においては，順序を表す記号「\(\obj{\le}\)」が用いられる．

	この他，「\(\obj{x}\)」や「\(\obj{y}\)」等の変数を表す記号やカッコ「\(\lparen\)」「\(\rparen\)」や
	カンマ「\(,\)」等は共通して用いられる．
\end{Ex}

\Cref{Ex:informalsymbol}では，対象の理論に依存して必要であったりそうでなかったりする記号と
共通して用いられる記号があった．
そのような記号を\cref{tab:commonsymbol}に示し，今後逐一言及しないものとする%
\footnote{%
	ここに示す記号とは違う記号を採用する場合もあるが，それは単に流儀や議論の対象の違いである．
	その違いによって質的に大きな差異が生じることもあればそうでないこともある．
}%
．

\begin{table}[htbp]
	\centering
	\caption{数学理論で共通して用いられる記号}
	\label{tab:commonsymbol}
	\begin{tabular}{ccc}
		\toprule
		種別   & 一覧                                                                   & 備考              \\
		\midrule
		変数記号 & \(\obj{x}, \obj{y}, \obj{z}, \dotsc\)                                & 無限に多く存在する（可算無限） \\
		論理記号 & \(\bot, \lnot, \land, \lor, \to, \forall, \exists\)                                    \\
		等号   & \(\obj{\mathord{\objeq}}\)                                           & オブジェクト側の意味での等号  \\
		補助記号 & \(\text{``\(\lparen\)''}, \text{``\(\rparen\)''}, \text{``\(,\)''}\) & カッコやカンマ         \\
		\bottomrule
	\end{tabular}
\end{table}

「名称」列に「変数記号」や「論理記号」等の名前が定義なしに入っているが，これは単にそういう区分けができることのみが要請される．
また，変数記号については無限に多く存在することが要請されているが，これについてはすでにいくつか記号が登場している状況下において
そのいずれとも異なる変数記号をいつでも用意できることを期待しての要請である．

さて，\cref{tab:commonsymbol}に追加で記号を付け加えることにより，各理論の特色が現れる．

\begin{Def} \label{def:language}
	記号の集合\(\symcal{L}\)が%
	\index[widx]{げんご@言語}%
	\term{言語}であるとは，\(\symcal{L}\)の元が以下の3種類に区分けされていることをいう：
	\begin{itemize}
		\item \index[widx]{ていすうきごう@定数記号}定数記号
		\item \index[widx]{かんすうきごう@関数記号}関数記号，\index[widx]{ありてぃ@アリティ}\term{アリティ}と呼ばれる正の整数\(n\)をもつ
		\item \index[widx]{かんけいきごう@関係記号}関係記号，\index[widx]{ありてぃ@アリティ}アリティと呼ばれる正の整数\(n\)をもつ
	\end{itemize}
\end{Def}

「定数記号」や「関数記号」という字面はいかにも我々の素朴的直観を呼び起こしそうであるが，
ここでは単にそういう名称で区分けできるということだけを要請しているに過ぎない．
アリティについても同様である．「この関数記号のアリティはいくつですか？」に対して「2です」のような
解答を返せることを要請しているに過ぎない．

言語については，例を述べるのがわかりやすいだろう．

\begin{Ex} \label[Ex]{Ex:languageexample}
	群論の言語\(\symcal{L}_1\)は\(\symcal{L}_1 = \set{\obj{\ast}, \obj{e}, {}^{\obj{-1}}}\)
	と与えることができる．ここで，\(\obj{\ast}\)はアリティ2の関数記号，\(\obj{e}\)は定数記号，
	\({}^{\obj{-1}}\)はアリティ1の関数記号である．
	また，順序の理論の言語\(\symcal{L}_2\)は\(\symcal{L}_2 = \set{\obj{\le}}\)と与えることができる．
	ここで，\(\obj{\le}\)はアリティ2の関係記号である．
\end{Ex}

アリティというのは，素朴的直観における「引数の数」の対応物だと考えられる．
こう考えてみれば，関数記号や関係記号にアリティが定まっていることを要請するのはごく自然であろう．


\section{項と論理式} \label[section]{sec:logicalexpression}

使う記号を定義したことで，これらを組み合わせて「モノ」や「主張」に相当する概念を構築していくことができる．
これは言語に対してある種の「文法」を定めることに相当する．
文法を定めることにより，形式的記号の集合でしかなかった言語が一気に「数学っぽい」性格を帯びてくる．

\index[widx]{こう@項}
\begin{Def} \label[Def]{Def:term}
	言語\(\symcal{L}\)に対し，\(\symcal{L}\)項を以下のように帰納的に定義する：
	\begin{enumerate}
		\item 変数記号は\(\symcal{L}\)項である．
		\item 定数記号は\(\symcal{L}\)項である．
		\item \(f\)が\(\symcal{L}\)におけるアリティ\(n\)の関数記号であり%
		      \footnote{%
			      ここで\(f\)がイタリック体なのは，「\(f\)」という記号そのものが\(\symcal{L}\)の関数記号というわけではなく
			      \(\symcal{L}\)の関数記号のうちのどれかであるということを明示することを意図している．
		      }%
		      ，
		      \(t_1, t_2, \dotsc, t_n\)が\(\symcal{L}\)項であるならば，記号列
		      \begin{equation}
			      \apply{f}{t_1, t_2, \dotsc, t_n}
		      \end{equation}
		      は\(\symcal{L}\)項である．
		\item 以上の規則を有限回適用して得られるもののみが項である．
	\end{enumerate}
\end{Def}


\begin{Ex} \label[Ex]{Ex:groupterm}
	\Cref{Ex:languageexample}で述べた群論の言語\(\symcal{L}_1\)において，
	\(\apply{\obj{\ast}}{\obj{x}, \obj{y}}, \obj{e}, \apply{\obj{\ast}}{\apply{\obj{\ast}}{\obj{e}, \obj{x}}, \obj{y}}\)は
	いずれも\(\symcal{L}_1\)項である．ここで，\(\obj{x}, \obj{y}\)は変数記号である．
	なお，順序の理論の言語\(\symcal{L}_2\)は定数記号も関数記号ももたないため，
	\(\symcal{L}_2\)項は変数記号のみである．
\end{Ex}

\begin{Que} \label{Que:termexample}
	\Cref{Def:term}に基づき，\cref{Ex:groupterm}における
	「\(\apply{\obj{\ast}}{\apply{\obj{\ast}}{\obj{e}, \obj{x}}, \obj{y}}\)」
	が\(\symcal{L}_1\)項であることを確かめよ．
	また，記号列「\(\obj{e} \apply{\mathord{\obj{\ast}}}{\obj{e}, \obj{e}}\)」が\(\symcal{L}_1\)項でないことを確かめよ．
\end{Que}


\index[widx]{ろんりしき@論理式}
\begin{Def} \label[Def]{Def:logicalexpression}
	言語\(\symcal{L}\)に対し，\(\symcal{L}\)論理式を以下のように帰納的に定義する：
	\begin{enumerate}
		\item \(\bot\)は論理式である．
		\item \(t_1, t_2\)が\(\symcal{L}\)項であるならば，記号列
		      \begin{equation}
			      \paren{t_1 \obj{\objeq} t_2}
		      \end{equation}
		      は\(\symcal{L}\)論理式である．
		\item \(r\)が\(\symcal{L}\)におけるアリティ\(n\)の関係記号であり%
		      \footnote{%
			      \Cref{Def:term}のときと同様の理由で\(r\)はイタリック体としている．
		      }%
		      ，\(t_1, t_2, \dotsc, t_n\)が\(\symcal{L}\)項であるならば，
		      記号列
		      \begin{equation}
			      \apply{r}{t_1, t_2, \dotsc, t_n}
		      \end{equation}
		      は\(\symcal{L}\)論理式である．
		\item \(\varphi, \psi\)が論理式で\(x\)が変数記号であるならば，
		      記号列
		      \begin{align}
			      \paren{\lnot \varphi},      \\
			      \paren{\varphi \land \psi}, \\
			      \paren{\varphi \lor \psi},  \\
			      \paren{\varphi \to \psi},   \\
			      \paren{\forall x \varphi},  \\
			      \paren{\exists x \varphi}
		      \end{align}
		      はいずれも\(\symcal{L}\)論理式である．
		\item 以上の規則を有限回適用して得られるもののみが論理式である．
	\end{enumerate}
\end{Def}

\begin{Def} \label[Def]{Def:atomiclogicalexpression}
	\Cref{Def:logicalexpression}において，最後に規則1, 2, 3を適用して得られる\(\symcal{L}\)論理式，すなわち
	\begin{align*}
		\bot,                   \\
		\paren{t_1 \objeq t_2}, \\
		\apply{r}{t_1, t_2, \dotsc, t_n}
	\end{align*}
	の形の\(\symcal{L}\)論理式を%
	\index[widx]{ろんりしき@論理式!げんしろんりしき@原子---}%
	\(\symcal{L}\)\term{原子論理式}といい，
	\(\symcal{L}\)原子論理式でない\(\symcal{L}\)論理式，
	すなわち最後に規則4を適用して得られる\(\symcal{L}\)論理式を%
	\index[widx]{ろんりしき@論理式!ふくごうろんりしき@複合---}%
	\(\symcal{L}\)\term{複合論理式}という．
	さらに，
	\begin{align*}
		\forall x \varphi, \\
		\exists x \varphi
	\end{align*}
	の形の\(\symcal{L}\)論理式をそれぞれ%
	\index[widx]{ろんりしき@論理式!ぜんしょうろんりしき@全称---}%
	\(\symcal{L}\)\term{全称論理式}，
	\index[widx]{ろんりしき@論理式!そんざいろんりしき@存在---}%
	\(\symcal{L}\)\term{存在論理式}という．
\end{Def}

\begin{Def} \label[Def]{Def:universalclosure}
	\(\symcal{L}\)を言語とし，\(\varphi\)を\(\symcal{L}\)論理式，\(\varphi\)に自由出現する変数記号全体が
	\[
		\apply{\FV}{\varphi} = \Set{x_1, x_2, \dots, x_n}
	\]
	であるとする．このとき，\(\symcal{L}\)論理式
	\[
		\forall x_1 \forall x_2 \dotsb \forall x_n \varphi
	\]
	は\(\symcal{L}\)閉論理式となる．この論理式を\(\varphi\)の%
	\index[widx]{ぜんしょうへいほう@全称閉包}%
	\term{全称閉包}という．
\end{Def}

\begin{Ex} \label[Ex]{Ex:logicalexpression}
	群論の言語\(\symcal{L}_1\)において，
	\(\paren{\apply{\obj{\ast}}{\obj{x}, \obj{y}} \obj{\objeq} \apply{\obj{\ast}}{\obj{y}, \obj{x}}}\)は
	\(\symcal{L}_1\)論理式である．また，順序の理論の言語\(\symcal{L}_2\)において，
	\(\paren{ \forall \obj{y} \mathord{\obj{\le}}\paren{ \obj{x}, \obj{y}} }\)や
	\(\paren{ \forall \obj{x} \paren{ \forall \obj{y}\apply{\mathord{\obj{\le}}}{\obj{x}, \obj{y}}} }\)は
	いずれも\(\symcal{L_2}\)論理式である．ここで，\(\obj{x}, \obj{y}\)は変数記号である．
\end{Ex}

論理式でない記号列の例も挙げておこう．

\begin{Ex} \label[Ex]{Ex:nologicalexpression}
	言語\(\symcal{L}\)において，\(\obj{x}\)が変数記号であるとき，
	記号列\(\paren{\exists \obj{x} \paren{\obj{x}}}\)は\(\symcal{L}\)論理式ではない．
	一方で，\(\paren{\exists \obj{x} \paren{\obj{x} \obj{\objeq} \obj{x}}}\)は\(\symcal{L}\)論理式である．
	また，群論の言語\(\symcal{L}_1\)において，\(\paren{\forall \obj{x} \paren{\obj{x} \obj{\ast} \obj{e} \objeq \obj{x}}}\)や
	\(\forall \obj{x} \paren{ \obj{x} \obj{\objeq} \obj{x}}\)はいずれも
	\emph{\cref{Def:logicalexpression}で述べた意味においては}\(\symcal{L}_1\)論理式ではない．
\end{Ex}

\begin{Que} \label[Que]{Que:logicalexpression}
	\Cref{Def:logicalexpression}に基づき，\cref{Ex:logicalexpression}と\cref{Ex:nologicalexpression}で
	挙げた各式について，それが実際に論理式であることやそうでないことを確かめよ．
\end{Que}

\begin{Note} \label[Note]{Note:logicalexpression}
	\Cref{Ex:nologicalexpression}の後半で「\cref{Def:logicalexpression}で述べた意味においては」
	と述べたのは，
	それなりに妥当性のある略記表現に関する約束事を適切に定めることにより，
	これらが論理式であるようにみなせるからである．
	例えば，以下のように約束することが多い：
	\begin{itemize}
		\item 誤解が生じない範囲で論理式の構成順序を表すかっこは省略してよい．
		\item 論理記号\(\lnot, \land, \lor, \to, \forall, \exists\)たちの結合の優先順位については，
		      \(\lnot, \forall, \exists\)がもっとも高く，次に\(\land, \lor\)が高く，
		      もっとも低いのが\(\to\)であると約束する．
		\item アリティ2の関数記号や関係記号については，\(\obj{x} \obj{\ast} \obj{y}\)や\(\obj{x} \le \obj{y}\)のように
		      その記号が真ん中に来るように配置して表記してよい．
	\end{itemize}
	こうすると，\(\paren{\paren{\varphi \land \paren{\lnot \psi}} \to \xi}\)は\(\varphi \land \lnot \psi \to \xi\)のように見やすくできる．
	これは，通常の数学における数の演算において，\(\mathord{\times}\)が\(\mathord{+}\)よりも優先度が高いとみなして
	\(\paren{\paren{2 \times 3} + 4} = 2 \times 3 + 4\)と略記することで可読性の向上を図るのとまったく同じである．
	これは人間が目で見る際に楽をするための約束事であって，数学的な議論の帰結ではないことに注意しておこう．
	本書でも，これらの略記表現を積極的に利用する．
\end{Note}

\begin{Note}
	例えば論理式\(\varphi, \psi, \chi\)に対する以下の2つの論理式
	\begin{align*}
		\varphi \land \paren{\psi \land \chi}, \\
		\paren{\varphi \land \psi} \land \chi
	\end{align*}
	は，それが表すと期待される主張を考えればどちらも「同じ論理式」であって，これらを
	\[
		\varphi \land \psi \land \chi
	\]
	と表記してしまってもよさそうに見える．
	本書では，これらの「素朴に考えれば問題は生じなさそう」という略記表現も積極的に使用することとする．
	確かに，素朴には問題なさそうでも本当に以降の議論に支障が生じないかどうかまでは実際に確かめるまではわからないというのは事実である．
	しかし，少なくとも本書の範囲内ではそれによって問題が生じることはまずない．
\end{Note}

\begin{Note} \label[Note]{Note:languageomission}
	ここまで「言語\(\symcal{L}\)において」とか「\(\symcal{L}\)項」のように，用いる言語を明示して議論を進めてきた．
	しかし，以下で行われるのは特定の言語に依存しない議論がほとんどである．
	そのため，特に断りがない限りは「言語\(\symcal{L}\)」の表記は省略することとする．
	「\(\symcal{L}\)項」や「\(\symcal{L}\)論理式」は単に「項」や「論理式」と呼称する．
\end{Note}


\section{変数の出現と代入可能性} \label{sec:substitution}

数学においては，一般論に具体例を当てはめることによって議論を進めることが多い．
これの形式的記号列の世界での対応物は，
項や論理式に登場する変数記号に別のものを当てはめることである．
この操作を定式化するためには，いくつかのステップを踏む必要がある．
なお，正確に書くとそれなりに議論が長くなるため，以下では相当にラフに記述していることに注意されたい．
ラフな部分はいずれも帰納的定義によって精密化できる．


\begin{Def} \label[Def]{Def:occurence}
	論理式
	\begin{align*}
		\varphi \colon \paren{\cdots \paren{\forall x \paren{\cdots x \cdots } \cdots}}, \\
		\psi \colon \paren{\cdots \paren{\exists x \paren{\cdots x \cdots } \cdots}}
	\end{align*}
	の変数記号\(x\)のように，\(\forall, \exists\)とともに出現している変数記号は
	その論理式に%
	\index[widx]{そくばくしゅつげん@束縛出現}%
	\term{束縛出現}しているといい，
	\(\forall, \exists\)をともなわずに出現している変数記号は
	その論理式に%
	\index[widx]{じゆうしゅつげん@自由出現}%
	\term{自由出現}しているという．
	また，論理式\(\varphi\)に束縛出現する変数記号全体の集合と\(\varphi\)に自由出現する変数記号全体の集合を，それぞれ%
	\index[sidx]{\(\apply{\BV}{\varphi}\)：論理式に束縛出現する変数記号全体の集合}%
	\index[sidx]{\(\apply{\FV}{\varphi}\)：論理式に自由出現する変数記号全体の集合}%
	\begin{align}
		\apply{\BV}{\varphi}, \\
		\apply{\FV}{\varphi}
	\end{align}
	と表す．%
	\index[sidx]{\(\apply{\Var}{t}\)：項に出現する変数記号全体の集合}%
	さらに，項\(t\)に出現する変数記号全体の集合を
	\begin{equation}
		\apply{\Var}{t}
	\end{equation}
	と表す．%
	\(\apply{\FV}{\varphi} = \emptyset\)であるような論理式\(\varphi\)は%
	\index[widx]{ろんりしき@論理式!へいろんりしき@閉---}%
	\term{閉論理式}，あるいは%
	\index[widx]{ぶん@文|see{閉論理式}}%
	\term{文}と呼ぶ．
	\(\apply{\Var}{t} = \emptyset\)となる項\(t\)は%
	\index[widx]{こう@項!へいこう@閉---}%
	\term{閉項}であるという．
\end{Def}

\begin{Note} \label[Note]{Note:languagesentence}
	言語\(\symcal{L}\)を明示する文脈においては
	閉論理式や文，閉項はそれぞれ\(\symcal{L}\)閉論理式，\(\symcal{L}\)文，\(\symcal{L}\)閉項と呼ぶ．
\end{Note}

\begin{Ex} \label[Ex]{Ex:occurence}
	群論の言語\(\symcal{L} = \set{\obj{\ast}, \obj{e}, {}^{\obj{-1}}}\)において，
	論理式
	\begin{equation*}
		\varphi \colon \paren{\forall \obj{a} \paren{\forall y \paren{
					\apply{\mathord{\obj{\ast}}}{\obj{x}, \obj{y}} \obj{\objeq} \apply{\mathord{\ast}}{\obj{y}, \obj{x}}
				}}}
	\end{equation*}
	に対しては
	\begin{align*}
		\apply{\BV}{\varphi} = \set{\obj{a}, \obj{y}}, \\
		\apply{\FV}{\varphi} = \set{\obj{x}}
	\end{align*}
	が成り立つ．この\(\obj{a}\)のように，
	\(\forall, \exists\)記号の直後でのみ出現する変数記号も束縛出現するとみなす．
\end{Ex}

以上の準備のもと，代入操作を定式化したいのだが，先に代入可能性について論ずる必要がある．

\index[widx]{だいにゅう@代入}
\begin{Def} \label[Def]{Def:cansubstitution}
	\(\varphi\)を論理式，\(x\)を変数記号，\(t\)を項とする．
	以下の2条件をともに満たす変数記号\(y\)が存在するとき，
	\(t\)は\(\varphi\)中の\(x\)に%
	\index[widx]{だいにゅう@代入!だいにゅうふかのう@---不可能}%
	\term{代入不可能}であるといい，
	そのような\(y\)が存在しないとき，
	\(t\)は\(\varphi\)中の\(x\)に%
	\index[widx]{だいにゅう@代入!だいにゅうかのう@---可能}%
	\term{代入可能}%
	であるという：
	\begin{itemize}
		\item \(\varphi\)が
		      \(\paren{\cdots \paren{\forall y \paren{\cdots x \cdots} \cdots} \cdots}\)
		      か
		      \(\paren{\cdots \paren{\exists y \paren{\cdots x \cdots} \cdots} \cdots}\)
		      の形の論理式である．ただし，この\(x\)は\(\varphi\)に自由出現しているものとする．
		\item \(y \in \apply{\Var}{t}\)である．
	\end{itemize}
\end{Def}

代入可能性については，例を見るのが手っ取り早い．

\begin{Ex} \label{Ex:cansubstitution}
	群論の言語\(\symcal{L} = \set{\obj{\ast}, \obj{e}, {}^{\obj{-1}}}\)において，
	論理式
	\begin{equation*}
		\varphi \colon \paren{\forall \obj{a} \paren{\forall y \paren{
					\apply{\mathord{\obj{\ast}}}{\obj{x}, \obj{y}} \obj{\objeq} \apply{\mathord{\ast}}{\obj{y}, \obj{x}}
				}}}
	\end{equation*}
	中の\(\obj{x}\)に項\(\apply{\obj{\ast}}{\obj{y}, \obj{e}}\)は代入不可能である．
	一方で，\(\obj{x}\)に項\(\obj{e}\)は代入可能である．
	また，\(\obj{a}, \obj{y}\)だけでなく
	\(\varphi\)に出現しない変数記号すべてに対してあらゆる項が代入可能である．
\end{Ex}

\index[sidx]{\(\subst{\varphi}{t/x}\)：論理式への代入}
\index[sidx]{\(\subst{t}{s/x}\)：項への代入}
\begin{Def} \label[Def]{Def:substitution}
	論理式\(\varphi\)中の変数記号\(x\)に項\(t\)が代入可能であるとき，
	\(\varphi\)に自由出現している\(x\)すべてを\(t\)に置き換えて得られる論理式を
	\begin{equation}
		\subst{\varphi}{t/x}
	\end{equation}
	と表す．

	また，項\(t\)に現れる変数記号\(x\)すべてを項\(s\)に置き換えて得られる項も同様に
	\begin{equation}
		\subst{t}{s/x}
		\label{eq:substterm}
	\end{equation}
	と表す．
\end{Def}

\begin{Ex} \label[Ex]{Ex:substitution}
	\Cref{Ex:cansubstitution}における\(\varphi\)において
	\begin{equation*}
		\subst{\varphi}{\obj{e} / \obj{x}} \colon
		\paren{\forall \obj{a} \paren{\forall \obj{y} \paren{
					\apply{\mathord{\obj{\ast}}}{\obj{e}, \obj{y}} \obj{\objeq} \apply{\mathord{\ast}}{\obj{y}, \obj{e}}
				}}}
	\end{equation*}
	である．また，\(\subst{\varphi}{\obj{e} / \obj{a}}\)と\(\subst{\varphi}{\obj{e} / \obj{y}}\)はいずれも\(\varphi\)そのものである．
\end{Ex}

\begin{Note}
	\(\varphi\)を論理式，\(x_1, x_2, \dots, x_n\)を\(\varphi\)に束縛出現しない変数記号とするとき，
	\(\varphi\)のことを
	\begin{equation}
		\apply{\varphi}{x_1, x_2, \dots, x_n}
		\label{eq:freevariablefunction}
	\end{equation}
	と表すことがある．このとき，\(\varphi\)中の\(x_1, x_2, \dots, x_n\)に代入可能な項\(t_1, t_2, \dots, t_n\)を代入して得られる論理式は
	\begin{equation}
		\apply{\varphi}{t_1, t_2, \dots, t_n}
		\label{eq:freevariablefunctionsubstitution}
	\end{equation}
	と表すことが多い．
	ここで，\(t_1, t_2, \dots, t_n\)に現れる変数記号が\(\varphi\)に束縛出現する場合，その束縛出現する記号を別の変数記号に置き換え，
	\(t_1, t_2, \dots, t_n\)に現れる変数記号が\(\varphi\)に束縛出現しないようにしておく．
	このような置き換えは，しばしば暗黙的に行われる．
	そのようにしても議論に影響がないことは\cref{chap:semantics}の\cref{Thm:alphaequivalent}による．
\end{Note}

記述を簡素化するために，追加で略記表現をを導入する．

\index[sidx]{\(\formulaequiv\)：（論理式の）同値}
\index[sidx]{\(\uexists\)：一意存在}
\begin{Def} \label{Def:AbbreviatioForFormula}
	論理式\(\varphi, \psi\)に対し，論理式
	\begin{align*}
		\paren{\varphi \to \psi} \land \paren{\psi \to \varphi}
	\end{align*}
	を
	\begin{equation}
		\varphi \formulaequiv \psi
		\label{eq:formulaequiv}
	\end{equation}
	と略記する．
	また，変数記号\(x_1, x_2\)が自由出現しない論理式\(\varphi\)に対し，論理式
	\begin{align*}
		\exists x \varphi \land \forall x \forall y \paren{\subst{\varphi}{x_1/x} \land \subst{\varphi}{x_2} \to x_1 \objeq x_2}
	\end{align*}
	を
	\begin{equation}
		\uexists x \varphi
		\label{eq:uexists}
	\end{equation}
	と略記する．

	\Cref{eq:formulaequiv}は「\(\varphi\)と\(\psi\)は同値である」
	ことを表現することが期待される論理式で，
	\cref{eq:uexists}は「\(\varphi\)となる\(x\)がただ1つ存在する」
	ことを表現することが期待される論理式である．
\end{Def}


\section{理論とその例} \label[section]{sec:Theory}

前節までは項や論理式に関する一般論を述べた．
ここでは，実際の数学理論がどう形式化されるかについて少しだけ触れる．

\begin{Def} \label[Def]{Def:theory}
	\(\symcal{L}\)を言語とするとき，\(\symcal{L}\)文からなる集合を%
	\index[widx]{りろん@理論}%
	\(\symcal{L}\)\term{理論}，あるいは%
	\index[widx]{こうりけい@公理系}%
	\(\symcal{L}\)\term{公理系}
	という．
	言語\(\symcal{L}\)を明示しない文脈では，\(\symcal{L}\)理論や\(\symcal{L}\)公理系は単に理論や公理系と呼ばれる．
\end{Def}

今後，例として登場する言語や理論を先んじていくつか挙げておく．

\index[sidx]{\(\GP\)：群の理論}
\index[sidx]{\(\symcal{L}_{\GP}\)：群の言語}
\begin{Ex} \label[Ex]{Ex:grouptheory}
	群の言語を\(\symcal{L}_{\GP} = \set{\obj{\ast}, \obj{e}, {}^{\obj{-1}}}\)とする．
	ここで，\(\obj{\ast}\)はアリティ2の関数記号，\(\obj{e}\)は定数記号，\({}^{\obj{-1}}\)はアリティ1の関係記号である．
	群の理論\(\GP\)は，次の3つの文からなる\(\symcal{L}_{\GP}\)理論であると考えることができる：
	\begin{enumerate}
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\paren{\obj{x} \obj{\ast} \obj{y}} \obj{\ast} \obj{z} \objeq \obj{x} \obj{\ast} \paren{\obj{y} \obj{\ast} \obj{z}}}\),
		\item \(\forall \obj{x} \paren{\obj{e} \obj{\ast} \obj{x} \objeq \obj{x}}\),
		\item \(\forall \obj{x} \paren{\obj{x}^{\obj{-1}} \obj{\ast} \obj{x} \objeq \obj{e}}\)．
	\end{enumerate}
	ここで，\(\apply{{}^{\obj{-1}}}{\obj{x}}\)を\(\obj{x} ^ {\obj{-1}}\)と略記した．
\end{Ex}

\begin{Que} \label[Que]{Que:invalidtheory}
	群の言語を\(\symcal{L} = \set{\obj{\ast}}\)だと考えて，群の理論を次のような\(\symcal{L}\)理論として書き下そうとする場合がある．
	\begin{enumerate}
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\paren{\obj{x} \obj{\ast} \obj{y}} \obj{\ast} \obj{z} \objeq \obj{x} \obj{\ast} \paren{\obj{y} \obj{\ast} \obj{z}}},\)
		\item \(\exists \obj{e} \forall \obj{x} \paren{\obj{e} \obj{\ast} \obj{x} \objeq \obj{x}},\)
		\item \(\forall \obj{x} \exists \obj{y} \paren{\obj{y} \obj{\ast} \obj{x} \objeq \obj{e}}.\)
	\end{enumerate}
	しかし，この書き下し方は構文的に不適切である．その理由を述べよ．
\end{Que}

\index[sidx]{\(\Ring\)：環の理論}
\index[sidx]{\(\symcal{L}_{\Ring}\)：環の言語}
\begin{Ex} \label[Ex]{Ex:Ring}
	環の言語を\(\symcal{L}_{\Ring} = \Set{\obj{+}, \obj{\cdot}, \obj{0}, \obj{1}}\)とする．
	環の理論\(\Ring\)は，以下の文からなる\(\symcal{L}_{\Ring}\)理論であると考えることができる：
	\begin{enumerate}
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z} \paren{\paren{\obj{x} \obj{+} \obj{y}} \obj{+} \obj{z} \objeq \obj{x} \obj{+} \paren{\obj{y} \obj{+} \obj{z}}},\)
		\item \(\forall \obj{x} \paren{\obj{0} \obj{+} \obj{x} \objeq \obj{x}},\)
		\item \(\forall \obj{x} \exists \obj{y} \paren{\obj{y} \obj{+} \obj{x} \objeq \obj{0}},\)
		\item \(\forall \obj{x} \forall \obj{y} \paren{\obj{x} \obj{+} \obj{y} \objeq \obj{y} \obj{+} \obj{x}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\paren{\obj{x} \obj{\cdot} \obj{y}} \obj{\cdot} \obj{z} \objeq \obj{x} \obj{\cdot} \paren{\obj{y} \obj{\cdot} \obj{z}}},\)
		\item \(\forall \obj{x} \paren{\paren{\obj{1} \obj{\cdot} \obj{x} \objeq \obj{x}} \land \paren{\obj{x} \obj{\cdot} \obj{1} \objeq \obj{x}}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\obj{x} \obj{\cdot} \paren{\obj{y} \obj{+} \obj{z}} \objeq \paren{\obj{x} \obj{\cdot} \obj{y}} \obj{+} \paren{\obj{x} \obj{\cdot} \obj{z}}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{ \paren{\obj{x} \obj{+} \obj{y}} \obj{\cdot} \obj{z} \objeq \paren{\obj{x} \obj{\cdot} \obj{z}} \obj{+} \paren{\obj{y} \obj{\cdot} \obj{z}}}.\)
	\end{enumerate}
	最初の文3つは，\(\symcal{L}_{\GP}\)における\(\obj{\ast}\)を\(\obj{+}\)に置き換えたものであることに注意せよ．
\end{Ex}

\index[sidx]{\(\POSET\)：狭義の半順序の理論}
\index[sidx]{\(\TOSET\)：狭義の全順序の理論}
\index[sidx]{\(\symcal{L}_{\POSET}\)：狭義の半順序の言語}
\begin{Ex} \label{Ex:orderedset}
	狭義の半順序の言語を\(\symcal{L}_{\POSET} = \Set{\obj{<}}\)とする．
	狭義の半順序の理論\(\POSET\)は，以下の2つの文からなる\(\symcal{L}_{\POSET}\)理論と考えることができる．
	\begin{enumerate}
		\item \(\forall \obj{x} \lnot \paren{x \obj{<} \obj{x}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\obj{x} \obj{<} \obj{y} \land \obj{y} \obj{<} \obj{z} \to \obj{x} \obj{<} \obj{z}}\)
	\end{enumerate}
	なお，理論\(\POSET\)に
	\[
		\forall \obj{x} \forall \obj{y}
		\paren{\obj{x} \obj{<} \obj{y} \lor \obj{y} \obj{<} \obj{x} \lor \obj{x} \objeq \obj{y}}
	\]
	を加えた理論は，狭義の全順序の理論を表していると考えることができる．
	この理論を\(\TOSET\)と表すこととする．
\end{Ex}

\index[sidx]{\(\OrderedRing\)：順序環の理論}
\index[sidx]{\(\symcal{L}_{\OrderedRing}\)：順序環の言語}
\begin{Ex} \label[Ex]{Ex:OrderedRing}
	順序環の言語を\(\symcal{L}_{\OrderedRing} = \Set{\obj{+}, \obj{\cdot}, \obj{0}, \obj{1}, \obj{<}}\)とする．
	順序環の理論\(\OrderedRing\)は，以下の文からなる\(\symcal{L}_{\OrderedRing}\)理論と考えることができる：
	\begin{enumerate}
		\item \Cref{Ex:Ring}で挙げた8つの論理式すべて，
		\item \Cref{Ex:orderedset}で挙げた3つの論理式すべて，
		\item \(\forall \obj{x} \forall \obj{y} \paren{\obj{x} \obj{\cdot} \obj{y} \objeq \obj{y} \obj{\cdot} \obj{x}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\obj{x} \obj{<} \obj{y} \to \obj{x} \obj{+} \obj{z} \obj{<} \obj{y} \obj{+} \obj{z}},\)
		\item \(\forall \obj{x} \forall \obj{y} \forall \obj{z}
		      \paren{\obj{x} \obj{<} \obj{y} \land \obj{0} \obj{<} \obj{z} \to \obj{x} \obj{\cdot} \obj{z} \obj{<} \obj{y} \obj{\cdot} \obj{z}}.\)
	\end{enumerate}
\end{Ex}

\index[sidx]{\(\ProjectiveGeometryPart\)：射影平面幾何の部分体系}
\index[sidx]{\(\symcal{L}_{\ProjectiveGeometryPart}\)：射影平面幾何の言語}
\begin{Ex} \label[Ex]{Ex:ProjectiveGeometry}
	\NewDocumentCommand{\LiesOn}{}{\mathrel{\obj{\varepsilon}}}
	射影平面幾何の言語を\(\symcal{L}_{\ProjectiveGeometryPart}\)を\(\symcal{L}_{\ProjectiveGeometryPart} = \Set{\obj{P}, \obj{L}, \LiesOn}\)
	とする．ここで，\(\obj{P}, \obj{L}\)はアリティ1の関係記号，\(\obj{\varepsilon}\)はアリティ2の関係記号である．
	このとき，射影平面幾何の理論の部分体系\(\ProjectiveGeometryPart\)として，以下の文からなる\(\symcal{L}_{\ProjectiveGeometryPart}\)理論を考えることができる：
	\begin{enumerate}
		\item \(\forall \obj{x} \paren{\apply{\obj{P}}{\obj{x}} \formulaequiv \lnot \apply{\obj{L}}{\obj{x}}},\)
		\item \(\forall \obj{x} \forall \obj{y} \paren{\obj{x} \LiesOn \obj{y} \to \apply{\obj{P}}{\obj{x}} \land \apply{\obj{L}}{\obj{y}}},\)
		\item \(\forall \obj{x} \forall \obj{y} \paren{\apply{\obj{P}}{\obj{x}} \land \apply{\obj{P}}{\obj{y}} \land \lnot \paren{\obj{x} \objeq \obj{y}}
			      \to \uexists z \paren{\obj{x} \LiesOn \obj{z} \land \obj{y} \LiesOn \obj{z}}},\)
		\item \(\forall \obj{x} \forall \obj{y} \paren{\apply{\obj{L}}{\obj{x}} \land \apply{\obj{L}}{y} \land \lnot \paren{\obj{x} \objeq \obj{y}}
			      \to \uexists z \paren{\obj{z} \LiesOn \obj{x} \land \obj{z} \LiesOn \obj{y}}},\)
		\item \(\apply{C}{x, y, z}\)を
		      \[
			      \lnot \exists \obj{w} \paren{x \LiesOn \obj{w} \land y \LiesOn \obj{w} \land z \LiesOn \obj{w}}
		      \]
		      の略記，
		      \(\apply{n}{a, b, c, d}\)を\[
			      \lnot \paren{a \objeq b} \land \lnot \paren{a \objeq c} \land \lnot \paren{a \objeq d} \land \lnot \paren{b \objeq c}
			      \land \lnot \paren{c \objeq d}\]
		      の略記としたときの
		      \[
			      \exists \obj{a} \exists \obj{b} \exists \obj{c} \exists \obj{d}
			      \paren{
				      \apply{n}{\obj{a}, \obj{b}, \obj{c}, \obj{d}}
				      \land \apply{C}{\obj{a}, \obj{b}, \obj{c}}
				      \land \apply{C}{\obj{a}, \obj{b}, \obj{d}}
				      \land \apply{C}{\obj{a}, \obj{c}, \obj{d}}
				      \land \apply{C}{\obj{b}, \obj{c}, \obj{d}}
			      }.
		      \]
	\end{enumerate}
	ただし，\(\obj{P}, \obj{L}\)は\(\apply{\obj{P}}{x}, \apply{\obj{L}}{x}\)でそれぞれ「\(x\)は点である」ことと「\(x\)は直線である」
	ことを表現する意図で導入した記号であり，
	\(\LiesOn\)は\(x \LiesOn y\)で「\(x\)は\(y\)上にある」ことを表現する意図で導入した記号である．
	すると，上記の各文は順に
	\begin{enumerate}
		\item 点と直線は異なる対象である．
		\item \(x\)が\(y\)上にあるならば，\(x\)は点であり，\(y\)は直線である．
		\item 任意の相異なる2点を通る直線がただ1つ存在する．
		\item 相異なる2直線はつねに1点で交わる．
		\item どの3つも共線でないような4点が存在する．
	\end{enumerate}
	を表現することを意図した論理式であると解釈できる．
	上記\(\apply{C}{x, y, z}\)は「3点\(x, y, z\)は共線ではない」という主張に対応する論理式であると考えることができる．
\end{Ex}

\begin{Note}
	\cref{Ex:ProjectiveGeometry}では\(c\)や\(n\)のようなもとの言語になかった記号が理論を記述するために使用されている．
	しかし，ここでの\(\apply{c}{x, y, y}\)や\(\apply{n}{a, b, c, d}\)は単に既知の論理式の略記表現であり，
	アリティ3, 4の新しい関係記号が導入されたわけではないことに注意しよう．
	\(c, n\)を使った論理式は，単に\(\apply{c}{x, y, z}, \apply{n}{a, b, c, d}\)をその定義に置き換えることによって
	いつでも\(c, n\)があらわれない形に書き直すことができる．
\end{Note}

\begin{Note}
	ここで導入した体系\(\ProjectiveGeometryPart\)は射影平面幾何の部分体系であり，射影平面幾何そのものではない．
	例えばこの体系\(\ProjectiveGeometryPart\)では，射影平面幾何の定理として有名なPappusの定理は証明できないことが知られている．

	また，平面幾何においては「点」と「直線」を区別して扱いたいので，対応する一階述語論理の理論においてそれを陽に提示する場合には
	\(\obj{P}\)や\(\obj{L}\)のような関係記号が必要となる．
	そのため，射影空間幾何の理論をこのやり方で作ろうとした場合は「平面」に対応する新しい記号が必要となる．
	すなわち，次元を1つ増やすごとにアリティ1の関係記号が1つ増えることになる．
\end{Note}


\begin{Que} \label[Que]{Que:ProjectiveGeometrydual}
	\NewDocumentCommand{\LiesOn}{}{\mathrel{\obj{\varepsilon}}}
	\Cref{Ex:ProjectiveGeometry}における言語\(\symcal{L}_{\ProjectiveGeometryPart}\)を考える．
	\(\sigma\)を\(\symcal{L}_{\ProjectiveGeometryPart}\)論理式とするとき，\(\sigma\)に対して以下の操作を施して得られる
	\(\symcal{L}_{\ProjectiveGeometryPart}\)論理式を\(\tilde{\sigma}\)とする%
	\footnote{%
		論理式における代入と同じように，この操作は帰納的定義によって精密化できる．%
	}%
	：
	\begin{enumerate}
		\item \(\sigma\)にあらわれる\(\obj{P}, \obj{L}\)をすべて入れ替える．
		\item \(\sigma\)にあらわれる\(x \LiesOn y\)という形の部分をすべて\(y \LiesOn x\)に変更する．
	\end{enumerate}
	この\(\tilde{\sigma}\)を\(\sigma\)の双対と呼ぶ．

	このとき，\cref{Ex:ProjectiveGeometry}で述べた体系\(\ProjectiveGeometryPart\)の各公理の双対を求めよ．
\end{Que}